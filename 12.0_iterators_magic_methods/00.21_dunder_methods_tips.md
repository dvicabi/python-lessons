# 📘 קובץ בונוס – טיפים ו־Best Practices למתודות קסומות

## ✨ עקרונות על

- ✨ מתודות קסומות נועדו **להשתלב בטבעיות עם התחביר של פייתון**.
- 🧠 כשאתה מגדיר אותן – אתה לא משנה את השפה, אתה מרחיב אותה.
- 🧱 מחלקה שמגדירה רק את `__init__` ו־`__str__` היא מחלקה בסיסית.
- 🧠 מחלקה שמגדירה גם `__eq__`, `__len__`, `__getitem__` ו־`__iter__` – כבר מתנהגת כמו טיפוס מובנה.

---

## ⚙️ כללי אצבע למתודות

### ✅ `__str__` מול `__repr__`
- `__str__` = מה שהמשתמש רואה (`print`) – קריא, פשוט
- `__repr__` = מה שהמתכנת רואה (`>>>`) – טכני, משחזר אובייקט
- כלל אצבע: אם יש לך `__repr__`, אתה כמעט תמיד צריך גם `__str__`

### ✅ `__eq__`, `__hash__`, `__lt__`
- אם אתה מגדיר `__eq__`, **שקול להגדיר גם `__hash__`** אם המחלקה אמורה להיות בשימוש כמפתח במילון
- אם המחלקה משמשת למיון/השוואות – תוסיף גם `__lt__`, `__le__`, `__gt__`, `__ge__`
- שקול שימוש ב־`functools.total_ordering` לחיסכון בקוד

### ✅ `__bool__`, `__len__`
- אם האובייקט שלך מדמה אוסף (כמו רשימה) – עדיף `__len__`
- אם האובייקט מדמה מצב (פעיל/כבוי) – עדיף `__bool__`

---

## 💥 טעויות נפוצות

- ❌ להחזיר לא־מחרוזת מ־`__str__`/`__repr__`
- ❌ להחזיר משהו שאינו `int` מ־`__index__`
- ❌ לכתוב `__next__` בלי `StopIteration` – תקבל לולאה אינסופית
- ❌ להחזיר `True`/`False` מתוך `__enter__` – במקום להחזיר את האובייקט
- ❌ לשכוח לבדוק `isinstance(other, MyClass)` במתודות השוואה

---

## 🚀 טכניקות מתקדמות

- 🧩 השתמש ב־`__slots__` כשאתה רוצה לחסוך בזיכרון (לא תמיד מתאים)
- 📦 `__getattr__` / `__setattr__` מאפשרים לבנות מחלקות דינמיות (כמו פרוקסי)
- 🔁 `__iter__` יכול להחזיר מחלקת איטרציה נפרדת ולא `self` – להפרדת אחריות
- 🛠️ אפשר ליצור מחלקה שמתנהגת כמו רשימה, אבל גם שומרת היסטוריה של שינויים (בעזרת `__setitem__` + לוג)

---

## 💬 המלצות פרקטיות

- ✍️ תתחיל מ־`__init__`, `__str__`, `__repr__`, `__eq__`, `__len__` – אלה הכי חשובים ברוב המחלקות
- 🧪 תכתוב טסטים אוטומטיים ל־`__eq__`, `__lt__`, ו־`__add__` – כדי למנוע השוואות לא צפויות
- 🧠 תשתמש ב־`print(repr(obj))` כדי לבדוק איך פייתון רואה את האובייקט שלך באמת
- 📚 עיין בקוד המקור של טיפוסים מובנים (`list`, `dict`, `str`) – הם דוגמה מעולה לעיצוב נכון

---

## ✅ תבנית מומלצת למחלקה "שלמה"
```python
class Entity:
    def __init__(self, id, name):
        self.id = id
        self.name = name

    def __str__(self):
        return self.name

    def __repr__(self):
        return f"Entity(id={self.id}, name='{self.name}')"

    def __eq__(self, other):
        return isinstance(other, Entity) and self.id == other.id

    def __len__(self):
        return len(self.name)

    def __bool__(self):
        return bool(self.name)
```

---

💡 שליטה במתודות הקסומות = כתיבת מחלקות קריאות, אינטואיטיביות ונכונות פייתונית.
```

}
